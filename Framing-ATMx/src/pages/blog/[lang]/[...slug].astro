---
import { rawPosts } from '@components/collection/all.posts';

import Heading1 from '@components/mdx/h1.astro';
import Heading2 from '@components/mdx/h2.astro';
import Heading3 from '@components/mdx/h3.astro';
import Heading4 from '@components/mdx/h4.astro';
import Heading5 from '@components/mdx/h5.astro';
import Heading6 from '@components/mdx/h6.astro';
import Para from '@components/mdx/p.astro';

export async function getStaticPaths() {
  const paths = rawPosts.map(page => {
    const [lang, ...slug] = page.slug.split('/');
    return { params: { lang, slug: slug.join('/') || undefined }, props: page };
  });

  return paths;
}

const page = Astro.props;
const { Content } = await page.render();
---

<Content components={{
  h1: Heading1,
  h2: Heading2,
  h3: Heading3,
  h4: Heading4,
  h5: Heading5,
  h6: Heading6,
  p: Para
}}/>